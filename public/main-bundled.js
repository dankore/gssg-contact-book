/*! For license information please see main-bundled.js.LICENSE.txt */
(()=>{var t={870:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function n(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=e,this.backgroundColor=this.generateBackgroundColor()}var e,o;return e=t,(o=[{key:"generateBackgroundColor",value:function(){for(var t=0,e=0;e<this.text.length;e++)t=this.text.charCodeAt(e)+((t<<5)-t);return"hsl(".concat(t%360,", 70%, 60%)")}},{key:"toString",value:function(){var t=this.text.split(" ").map((function(t){return t[0]})).slice(0,2).join("").toUpperCase(),e=this.getContrastingColor(this.backgroundColor);return'\n    <svg xmlns="http://www.w3.org/2000/svg" width="128" height="128">\n      <rect x="0" y="0" width="128" height="128" rx="50%" fill="'.concat(this.backgroundColor,'" />\n      <text x="50%" y="50%" text-anchor="middle" fill="').concat(e,'" font-size="36">').concat(t,"</text>\n    </svg>\n  ")}},{key:"getContrastingColor",value:function(t){var e,n,o=(e=t.substring(4,t.length-1).split(",").map((function(t){return parseFloat(t)})),n=3,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,n)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return o[0],o[1],o[2]>50?"black":"white"}}])&&n(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports={TextAvatar:o}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype),s=new N(n||[]);return i(a,"_invoke",{value:S(t,r,s)}),a}function m(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var d={};function h(){}function y(){}function p(){}var v={};u(v,s,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(C([])));g&&g!==n&&o.call(g,s)&&(v=g);var w=p.prototype=h.prototype=Object.create(v);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(e,r){function n(i,a,s,l){var c=m(e[i],e,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==t(f)&&o.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,s,l)}),(function(t){n("throw",t,s,l)})):r.resolve(f).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,l)}))}l(c.arg)}var a;i(this,"_invoke",{value:function(t,e){function o(){return new r((function(r,o){n(t,e,r,o)}))}return a=a?a.then(o,o):o()}})}function S(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=L(a,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=m(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function L(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=m(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function C(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:O}}function O(){return{value:void 0,done:!0}}return y.prototype=p,i(w,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:y,configurable:!0}),y.displayName=u(p,c,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},r.awrap=function(t){return{__await:t}},E(x.prototype),u(x.prototype,l,(function(){return this})),r.AsyncIterator=x,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new x(f(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(w),u(w,c,"Generator"),u(w,s,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},r}function n(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function o(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var i=r(870).TextAvatar,a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.input=document.querySelector("#input-comment"),this.userComment="",this.commentsContainerUl=document.querySelector("#comment-container-ul"),this.commentsCount=document.querySelector("#comment-count"),this.commentWordContainer=document.querySelector("#comment-word"),this.commentsSection=document.querySelector("#comments-section"),this.modalOverlay=document.querySelector(".modal-overlay"),this.is_dev_environment="development"==document.getElementById("app-env").value,this.sessionUser=document.getElementById("session-user").value,this.events()}var r,a;return r=t,a=[{key:"events",value:function(){var t=this;this.commentsSection.addEventListener("keyup",(function(e){e.target&&"input-comment"==e.target.id&&t.handleInputkeyUp(e)})),this.commentsSection.addEventListener("click",(function(e){e.target&&"add-comment-button"==e.target.id&&t.handleAddCommentClick(e),e.target&&"delete-comment-button"==e.target.id&&t.handleDeleteComment(e),e.target&&"edit-comment-button"==e.target.id&&t.handleOpenCloseEditContainer(e),e.target&&"update-comment-button"==e.target.id&&t.handleUpdateComment(e),e.target&&"cancel-comment-button"==e.target.id&&t.handleCancelEditCommentConatiner(e)}))}},{key:"handleInputkeyUp",value:function(t){t.target.style.height="1px",t.target.style.height=25+t.target.scrollHeight+"px",this.input.style.height="1px",this.input.style.height=25+this.input.scrollHeight+"px",this.userComment=t.target.value}},{key:"handleCancelEditCommentConatiner",value:function(t){var e=t.target.parentElement.parentElement.parentElement.querySelector(".edit-comment-parent");this.modalOverlay.classList.remove("active"),e.classList.remove("active"),e.style.display="none"}},{key:"handleOpenCloseEditContainer",value:function(t){var e=t.target.parentElement.parentElement.parentElement.parentElement,r=e.querySelector(".edit-comment-parent"),n=e.querySelector("#input-comment");"none"==r.style.display?(r.style.display="block",this.modalOverlay.classList.add("active"),r.classList.add("active"),n.focus()):r.style.display="none"}},{key:"handleUpdateComment",value:function(t){var r=t.target.parentElement.parentElement.parentElement,o=r.querySelector("#input-comment"),i=r.querySelector(".edit-comment-parent"),a=r.querySelector(".comment-date-time"),s=r.querySelector(".comment");o.value&&(fetch("/edit-comment",{method:"POST",body:JSON.stringify({commentId:o.getAttribute("data-comment-id"),comment:o.value,profileEmail:t.target.getAttribute("data-profile-email")}),headers:{"Content-Type":"application/json"}}).then((function(t){return t})).then(function(){var t,r=(t=e().mark((function t(r){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.ok){t.next=8;break}return t.next=3,r.json();case 3:n=t.sent,s.innerText=n.comment,a.innerText=n.commentDate,t.next=9;break;case 8:alert("Sorry, the comment was not updated. Please try again later.");case 9:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function s(t){n(a,o,i,s,l,"next",t)}function l(t){n(a,o,i,s,l,"throw",t)}s(void 0)}))});return function(t){return r.apply(this,arguments)}}()).catch((function(t){console.log("Error updating comment.",t)})),this.modalOverlay.classList.remove("active"),r.classList.remove("active"),i.style.display="none")}},{key:"handleDeleteComment",value:function(t){confirm("Are you sure?")&&fetch("/delete-comment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({commentId:t.target.getAttribute("data-comment-id"),profileEmail:t.target.getAttribute("data-profile-email")})}).then((function(t){return t})).then((function(e){if(!e.ok)throw new Error(e.error);t.target.parentElement.parentElement.parentElement.parentElement.remove()})).catch((function(t){console.error(t),alert("Sorry, the comment was not deleted. Please try again later.")}))}},{key:"handleAddCommentClick",value:function(t){var e=this;this.userComment&&fetch("/add-comment",{method:"POST",body:JSON.stringify({comment:this.userComment,visitorEmail:t.target.getAttribute("data-visitor-email"),contactEmail:t.target.getAttribute("data-contact-email")}),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(r){if(r.error)throw new Error(r.error.message);e.commentsContainerUl.insertAdjacentHTML("afterbegin",e.commentHtml(r,t)),e.input.value="",e.input.focus()})).catch((function(t){console.error(t.message)}))}},{key:"commentHtml",value:function(t,e){var r=t.commentId,n=t.comment,o=t.profileEmail,a=t.visitorUsername,s=t.visitorFirstName,l=t.commentDate,c=JSON.parse(this.sessionUser);return'<li id="li-comment">\n            <div class="flex space-x-3">\n              <p class="flex-shrink-0">\n                <img loading="lazy" src="'.concat(c.photo?c.photo:"data:image/svg+xml;utf8,".concat(encodeURIComponent(new i(s).toString())),'" class="h-8 w-8 rounded-full bg-white border border-red-300" alt="').concat(s,'" />\n              </p>\n\n              <div>\n                <div class="text-sm">\n                  <a href="/contacts/').concat(a,'" class="font-medium text-gray-900">').concat(s,'</a>\n                </div>\n                <div class="mt-1 text-sm text-gray-700">\n                  <p class="comment break-all">').concat(n,'</p>\n                </div>\n                <div class="mt-2 space-x-2 text-sm">\n                  <datetime datetime="').concat(l,'" class="comment-date-time font-medium text-gray-600">').concat(l,'</datetime>\n\n                  <span class="font-medium text-gray-600">&middot;</span>\n                  <button id="edit-comment-button" class="font-medium text-gray-900">Edit</button>\n                  <button id="delete-comment-button" data-comment-id="').concat(r,'" data-profile-email="').concat(o,'" class="font-medium text-red-600">Delete</button>\n                </div>\n              </div>\n            </div>\n\n            <div class="edit-comment-parent modal shadow-2xl" style="display: none">\n              <textarea id="input-comment" data-comment-id="').concat(r,'" class="w-full p-2 border border-primary-400 rounded" style="background-color: #f2f3f5; white-space: pre-wrap; overflow: hidden">').concat(n,'</textarea>\n              <div class="flex justify-between py-4">\n                <button id="cancel-comment-button" class="bg-primary-700 text-white px-2 rounded hover:bg-primary-800">Cancel</button>\n                <button data-comment-id="').concat(r,'" data-profile-email="').concat(o,'" id="update-comment-button" class="bg-primary-700 text-white px-2 rounded hover:bg-primary-800">Update</button>\n              </div>\n            </div>\n        </li>')}}],a&&o(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),t}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(){l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function f(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),s=new N(o||[]);return n(a,"_invoke",{value:S(t,r,s)}),a}function m(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var d={};function h(){}function y(){}function p(){}var v={};u(v,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(C([])));g&&g!==e&&r.call(g,i)&&(v=g);var w=p.prototype=h.prototype=Object.create(v);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(n,i,a,l){var c=m(t[n],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==s(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,l)}),(function(t){o("throw",t,a,l)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,l)}))}l(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function S(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=L(a,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=m(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function L(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=m(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return y.prototype=p,n(w,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:y,configurable:!0}),y.displayName=u(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},E(x.prototype),u(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function c(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=document.querySelector("#delete-account-form"),this.deleteButton=document.querySelector("#delete-account"),this.sessionUser=document.getElementById("session-user").value,this.bindEvents()}var e,r,n,o;return e=t,r=[{key:"bindEvents",value:function(){var t=this;this.deleteButton.addEventListener("click",(function(e){e.preventDefault(),window.confirm("This action is not reversible. Are you sure you want to delete your account?")&&t.sendPostRequest()}))}},{key:"sendPostRequest",value:(n=l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=new FormData(this.form),t.next=4,fetch(this.form.action,{method:"POST",body:JSON.stringify({_csrf:e.get("_csrf"),account_username:e.get("account_username")}),headers:{"Content-Type":"application/json"}});case 4:if(t.sent.ok){t.next=7;break}throw new Error("Failed to delete account.");case 7:window.location.href="/",t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){c(i,r,o,a,s,"next",t)}function s(t){c(i,r,o,a,s,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})}],r&&u(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===m(o)?o:String(o)),n)}var o}function h(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function y(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,v(t,e,"get"))}function p(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,v(t,e,"set"),r),r}function v(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var b=new WeakMap,g=new WeakMap;const w=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,b,{writable:!0,value:null}),h(this,g,{writable:!0,value:null}),p(this,b,document.querySelector("#filter-icon-container")),p(this,g,document.querySelector("#form-container")),this.attachEventListeners()}var e,r;return e=t,(r=[{key:"attachEventListeners",value:function(){var t=this;y(this,b).addEventListener("click",(function(){return t.handleFilterIcon()}))}},{key:"handleFilterIcon",value:function(){"none"===y(this,g).style.display?(y(this,g).style.display="block",y(this,b).classList.add("top-bar")):(y(this,b).classList.remove("top-bar"),y(this,g).style.display="none")}}])&&d(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===E(o)?o:String(o)),n)}var o}var S=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=document.getElementById("change-profile-photo-form"),this.parentContainers=this.form.querySelectorAll("#mobile-container, #desktop-container"),this.initEvents()}var e,r;return e=t,(r=[{key:"initEvents",value:function(){var t=this;this.parentContainers.forEach((function(e){e.addEventListener("change",(function(r){return t.handlePreviewImage(r,e)}))}))}},{key:"handlePreviewImage",value:function(t,e){var r=URL.createObjectURL(t.target.files[0]);e.querySelector("img").src=r}}])&&x(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==L(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===L(o)?o:String(o)),n)}var o}var j=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.imageUrl=e,this.zoom()}var e,r;return e=t,(r=[{key:"zoom",value:function(){var t=document.createElement("div");t.classList.add("relative","z-10");var e=document.createElement("div");e.classList.add("fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity"),e.id="dialog";var r=document.createElement("div");r.classList.add("fixed","inset-0","z-10","overflow-y-auto");var n=document.createElement("div");n.classList.add("flex","min-h-full","items-end","justify-center","p-4","text-center","sm:items-center","sm:p-0");var o=document.createElement("div");o.classList.add("relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pt-5","pb-4","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:max-w-xl","sm:p-6"),o.id="modal";var i=document.createElement("button");i.id="btn-close-modal",i.type="button",i.classList.add("inline-flex","w-full","justify-center","rounded-md","border","border-transparent","bg-secondary-600","px-4","py-2","text-base","font-medium","text-white","shadow-sm","hover:bg-secondary-700","focus:outline-none","focus:ring-2","focus:ring-secondary-500","focus:ring-offset-2","sm:text-sm"),i.textContent="Close";var a=document.createElement("div");a.classList.add("mt-5","sm:mt-6"),a.appendChild(i);var s=document.createElement("img");s.classList.add("object-contain","z-50","mx-auto","rounded-full","h-56","w-56"),s.src=this.imageUrl,o.appendChild(s),o.appendChild(a),n.appendChild(o),r.appendChild(n),t.appendChild(e),t.appendChild(r),document.body.appendChild(t),r.addEventListener("click",(function(e){e.target!==s&&t.remove()}))}}])&&k(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==N(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===N(o)?o:String(o)),n)}var o}var O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=document.querySelector("#registration-form"),this.allFields=document.querySelectorAll("#registration-form .form-control"),this.insertValidationElements(),this.firstName=document.querySelector("#first-name"),this.firstName.previousValue="",this.lastName=document.querySelector("#last-name"),this.lastName.previousValue="",this.email=document.querySelector("#email"),this.email.previousValue="",this.email.isUnique=!1,this.year=document.querySelector("#year"),this.year.previousValue="",this.password=document.querySelector("#password"),this.password.previousValue="",this.events()}var e,r;return e=t,(r=[{key:"events",value:function(){var t=this;this.form.addEventListener("submit",(function(e){e.preventDefault(),t.formSubmitHandler()})),this.firstName.addEventListener("keyup",(function(){t.isDifferent(t.firstName,t.firstNameHandler)})),this.lastName.addEventListener("keyup",(function(){t.isDifferent(t.lastName,t.lastNameHandler)})),this.email.addEventListener("keyup",(function(){t.isDifferent(t.email,t.emailHandler)})),this.year.addEventListener("keyup",(function(){t.isDifferent(t.year,t.yearHandler())})),this.password.addEventListener("keyup",(function(){t.isDifferent(t.password,t.passwordHandler)})),this.firstName.addEventListener("blur",(function(){t.isDifferent(t.firstName,t.firstNameHandler)})),this.lastName.addEventListener("blur",(function(){t.isDifferent(t.lastName,t.lastNameHandler)})),this.year.addEventListener("blur",(function(){t.isDifferent(t.year,t.yearHandler)})),this.email.addEventListener("blur",(function(){t.isDifferent(t.email,t.emailHandler)})),this.password.addEventListener("blur",(function(){t.isDifferent(t.password,t.passwordHandler)}))}},{key:"isDifferent",value:function(t,e){e&&t.previousValue!=t.value&&e.call(this),t.previousValue=t.value}},{key:"hideValidationError",value:function(t){t.nextElementSibling.classList.remove("liveValidationMessage--show")}},{key:"showValidationError",value:function(t,e){t.nextElementSibling.innerText=e,t.nextElementSibling.classList.add("liveValidationMessage--show"),t.errors=!0}},{key:"insertValidationElements",value:function(){this.allFields.forEach((function(t){t.insertAdjacentHTML("afterend",'<div class="bg-red-100 border-red-400 border-l border-t border-r text-red-700 text-center text-xs rounded liveValidationMessage">ada</div>')}))}},{key:"formSubmitHandler",value:function(){this.firstNameImmediately(),this.firstNameAfterDelay(),this.lastNameImmediately(),this.lastNameAfterDelay(),this.emailAfterDelay(),this.yearImmediately(),this.yearAfterDelay(),this.passwordImmediately(),this.passwordAfterDelay(),this.firstName.errors||this.lastName.errors||!this.email.isUnique||this.email.errors||this.year.errors||this.password.errors||this.form.submit()}},{key:"passwordHandler",value:function(){var t=this;this.password.errors=!1,this.passwordImmediately(),clearTimeout(this.password.timer),this.password.timer=setTimeout((function(){return t.passwordAfterDelay()}),1e3)}},{key:"passwordImmediately",value:function(){this.password.value.length>50&&this.showValidationError(this.password,"Password cannot exceed 50 characters."),this.password.errors||this.hideValidationError(this.password)}},{key:"passwordAfterDelay",value:function(){this.password.value.length<6&&this.showValidationError(this.password,"Password must be at least 6 characters.")}},{key:"emailHandler",value:function(){var t=this;this.email.errors=!1,clearTimeout(this.email.timer),this.email.timer=setTimeout((function(){return t.emailAfterDelay()}),1e3)}},{key:"emailAfterDelay",value:function(){var t=this;this.isEmail(this.email.value)||this.showValidationError(this.email,"You must provide a valid email address."),this.email.errors||fetch("/doesEmailExist",{method:"POST",body:JSON.stringify({email:this.email.value}),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(e){e?(t.email.isUnique=!1,t.showValidationError(t.email,"That email is already being used.")):(t.email.isUnique=!0,t.hideValidationError(t.email))})).catch((function(t){console.log("Please try again later.",t)}))}},{key:"isEmail",value:function(t){return!!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}},{key:"firstNameHandler",value:function(){var t=this;this.firstName.errors=!1,this.firstNameImmediately(),clearTimeout(this.firstName.timer),this.firstName.timer=setTimeout((function(){return t.firstNameAfterDelay()}),1e3)}},{key:"firstNameImmediately",value:function(){""==this.firstName.value||/^[\w-]+$/.test(this.firstName.value)||this.showValidationError(this.firstName,"First Name can only contain letters, numbers, dashes, and hyphens."),this.firstName.value.length>50&&this.showValidationError(this.firstName,"First name cannot exceed 50 characters."),this.firstName.errors||this.hideValidationError(this.firstName)}},{key:"firstNameAfterDelay",value:function(){""==this.firstName.value&&this.showValidationError(this.firstName,"First name cannot be empty.")}},{key:"lastNameHandler",value:function(){var t=this;this.lastName.errors=!1,this.lastNameImmediately(),clearTimeout(this.lastName.timer),this.lastName.timer=setTimeout((function(){return t.lastNameAfterDelay()}),1e3)}},{key:"lastNameImmediately",value:function(){""==this.lastName.value||/^[\w-]+$/.test(this.lastName.value)||this.showValidationError(this.lastName,"Last name can only contain letters, numbers, dashes, and hyphens."),this.lastName.value.length>50&&this.showValidationError(this.lastName,"Last name cannot exceed 50 characters."),this.lastName.errors||this.hideValidationError(this.lastName)}},{key:"lastNameAfterDelay",value:function(){""==this.lastName.value&&this.showValidationError(this.lastName,"Last name cannot be empty.")}},{key:"yearHandler",value:function(){var t=this;this.year.errors=!1,this.yearImmediately(),clearTimeout(this.year.timer),this.year.timer=setTimeout((function(){return t.yearAfterDelay()}),1e3)}},{key:"yearImmediately",value:function(){""==this.year.value||/^[\d]+$/.test(this.year.value)||this.showValidationError(this.year,"Year can only be numbers."),this.year.value.length>4&&this.showValidationError(this.year,"Year cannot exceed 4 characters."),this.year.errors||this.hideValidationError(this.year)}},{key:"yearAfterDelay",value:function(){this.year.value.length<4&&this.showValidationError(this.year,"Year cannot be less than 4 characters.")}}])&&C(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function T(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==P(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===P(o)?o:String(o)),n)}var o}var A=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.openMobileMenu=document.getElementById("open-mobile-menu"),this.closeMobileMenu=document.getElementById("close-mobile-menu"),this.mobileMenuContainer=document.getElementById("mobile-menu-container"),this.attachEventListeners()}var e,r;return e=t,(r=[{key:"attachEventListeners",value:function(){this.openMobileMenu.addEventListener("click",this.toggleMenu.bind(this)),this.closeMobileMenu.addEventListener("click",this.toggleMenu.bind(this))}},{key:"toggleMenu",value:function(){this.mobileMenuContainer.classList.toggle("hidden")}}])&&T(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();document.querySelector("#delete-account-form")&&new f,document.querySelector("#registration-form")&&new O,document.querySelector("#filter-icon-container")&&new w,document.getElementById("add-comment-button")&&new a,document.getElementById("open-mobile-menu")&&new A,document.getElementById("change-profile-photo-form")&&new S;var I=document.getElementById("preview-button");I&&I.addEventListener("click",(function(t){t.preventDefault(),new j(t.target.dataset.image)}))})()})();